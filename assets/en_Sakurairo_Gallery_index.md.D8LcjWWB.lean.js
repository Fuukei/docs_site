import{_ as o,c as r,j as t,a as i,G as n,a2 as s,B as l,o as d}from"./chunks/framework.DPuwY6B9.js";const y=JSON.parse('{"title":"Built-in Random Image API Usage Guide","description":"","frontmatter":{"title":"Built-in Random Image API Usage Guide"},"headers":[],"relativePath":"en/Sakurairo/Gallery/index.md","filePath":"en/Sakurairo/Gallery/index.md"}'),c={name:"en/Sakurairo/Gallery/index.md"},p={id:"built-in-random-image-api",tabindex:"-1"};function m(g,e,u,h,b,f){const a=l("Badge");return d(),r("div",null,[t("h1",p,[e[0]||(e[0]=i("Built-in Random Image API ")),n(a,{type:"tip",text:"v3.0"}),e[1]||(e[1]=i()),e[2]||(e[2]=t("a",{class:"header-anchor",href:"#built-in-random-image-api","aria-label":'Permalink to "Built-in Random Image API <Badge type="tip" text="v3.0" />"'},"​",-1))]),e[3]||(e[3]=s(`<p>The theme comes with a built-in random image API, seamlessly integrated with the theme settings and supporting WebP image optimization for reduced file size.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>To use for the first time, go to<br><code>iro Theme Settings &gt; Homepage Settings &gt; Cover Settings &gt; Built-in API Controller</code><br> and click <strong>Initialize</strong>.</p><p>After initialization, a folder named <code>iro_gallery</code> will be created under <code>wp-contents/uploads</code> as the working directory.<br> Directory structure explanation:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>.</span></span>
<span class="line"><span>├── iro_gallery       // Working directory</span></span>
<span class="line"><span>│   ├── img           // Store images to be served</span></span>
<span class="line"><span>│   ├── backup        // Backup folder for original images</span></span>
<span class="line"><span>|   ├── imglist.json  // Image index</span></span></code></pre></div><p>To improve performance, the API uses a file index instead of scanning the directory each time.<br><strong>Make sure to rebuild the index every time you modify the contents of the <code>img</code> folder,</strong> or it may return invalid image links.</p><p>The <code>backup</code> directory stores original versions of images before WebP optimization.<br> Make sure this folder is empty before using features that may conflict with timeout or breakpoint recovery.</p><h2 id="how-to-use" tabindex="-1">How to Use: <a class="header-anchor" href="#how-to-use" aria-label="Permalink to &quot;How to Use:&quot;">​</a></h2><h3 id="random-images" tabindex="-1">Random Images <a class="header-anchor" href="#random-images" aria-label="Permalink to &quot;Random Images&quot;">​</a></h3><p>Put your favorite images in the <code>img</code> folder under <code>iro_gallery</code>.<br> You can organize them into subfolders as needed.<br> After placing the images, go back to the dashboard and click <strong>Rebuild Index</strong>.<br> Then, switch the homepage cover image setting to use the <strong>Built-in API</strong> and you&#39;re good to go!</p><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>The API relies on the file index for performance.<br> Remember to <strong>rebuild the index</strong> after making changes!</p></div><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>The built-in API is integrated with the theme&#39;s CDN settings.<br> Refer to the <strong>Image CDN</strong> configuration to have the images loaded via your CDN.</p></div><h3 id="webp-optimization" tabindex="-1">WebP Optimization <a class="header-anchor" href="#webp-optimization" aria-label="Permalink to &quot;WebP Optimization&quot;">​</a></h3><p>WebP is a web-optimized image format that significantly reduces file size while maintaining quality.<br> However, compatibility with some older browsers may be limited.</p><p>Before optimizing:</p><ul><li>Ensure the <code>img</code> folder is writable by PHP.</li><li>If the images were uploaded by an admin user, adjust the file permissions to match those created by the system.</li></ul><p>Once ready, click <strong>WebP Optimization</strong> in the admin panel.<br><strong>Don&#39;t forget to rebuild the index afterward!</strong></p><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>Long loading, white/black screens during the process are normal.<br> If you haven’t changed PHP’s <code>max_execution_time</code>,<br> wait up to 30–60 seconds (depending on image count and server performance).<br> You may also use tools like FFmpeg to convert locally and upload manually.</p></div><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>After the page loads, verify whether all files were successfully converted.<br> If not (due to server performance or PHP limits), you can refresh the page to continue.<br> Conversion resumes until each file in <code>backup</code> has a corresponding WebP version in <code>img</code>.<br> Alternatively, convert locally and upload to <code>img</code>, then click <strong>Rebuild Index</strong>.</p></div><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>The API automatically categorizes images based on a 9:10 width/height standard (currently not customizable).<br> Return logic:</p><ul><li>Mobile: prioritizes portrait images</li><li>PC: prioritizes landscape images</li><li>If none match, fallback images from other categories will be returned</li></ul></div>`,20))])}const k=o(c,[["render",m]]);export{y as __pageData,k as default};
